---
title: "Medium preparation"
output: pdf_document
date: "2022-11-23"
header-includes:
    - \usepackage{fancyhdr}
    - \pagestyle{fancy}
toc: true
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(knitr)
```


`r date = "20121123"`
`r n_plate = 1`


\newpage

## 10X M9 salt solution, 1 L

**Recipe** 

```{r}
tt <- tibble(
    Stock = c("Na~2~HPO~4~ 2H~2~O", "KH~2~PO~4~", "NaCl", "NH~4~Cl"),
    `Amount (g)` = c(85, 30, 5, 10),
    `Molar mass` = c(142, 136, 58, 54),
    Ratio = c(142/(142+2*18), 1,1,1) %>% round(3), 
    `Concentration (g/L)` = `Amount (g)` * Ratio %>% round(1),
    `Concentration (mM)` = `Concentration (g/L)` / `Molar mass` * 1000 %>% round (2)
)
```

```{r}
tt %>%
    select(Stock, `Amount (g)`, `Concentration (g/L)`) %>%
    mutate(`Amount (g)` = paste0(`Amount (g)`, " g")) %>%
    mutate(`Concentration (g/L)` = paste0(`Concentration (g/L)`, " g/L")) %>%
    mutate(across(everything(), as.character)) %>%
    bind_rows(tibble(Stock = "ddH~2~O", `Amount (g)` = "1 L", `Concentration (g/L)` = "")) %>%
    kable()
```

 
**Element**

```{r}
tt %>%
    kable()
```


\newpage

## 0.2% glucose with M9 (M9G), 200 mL

**Recipe**

Stock | Amount | Concentration
-|-|-
glucose powder | 0.4 g | 0.2% glucose 
10X M9 | 20 mL | 1X M9
ddH~2~O| 180 mL | ddH~2~O
1M MgSO~4~ | 400 $\mu$L| 2 mM MgSO~4~
1M CaCl~2~ | 20 $\mu$L | 0.1mM CaCl~2~ 

**Item**

Item | Usage | Amount
-|-|-
weighing scale, spoon straw and weigh boat | weighing | 1 
electronic pipette, P1000, P20 | dispense | 1
50 mL tip | dispense 10X M9 | 1
250 mL bottle | mixing bottle and filtered bottle | 2
200 mL cylinder | dispense | 1
stericup | filter | 1

```{r include = F, eavl = F}
tool <- data.frame(
  Tool = c("weighing scale", "flame", "electronic pipette", "P1000", "P20", "vacuum tube"),
  Amount = rep(1, 6)
)
item <- data.frame(
  Item = c("spoon straw", "weigh boat", "yellow tape", "250 mL bottle", "200 mL cylinder", "P1000 tip", "P20 tip", "stericup"),
  Amount = c(1, 1, 1, 2, 1, "one box", "one box", 1)
)
kable(list(tool, item))
```

**Protocol**

- **Weigh glucose powder.** 
    - Take two 250 mL Pyrex bottles and use tape to label them with `M9G` (mixing bottle) and `M9G filtered` (filtered bottle). Yellow tape is preferred for filtered bottle. 
    - Use a spoon straw to scoop glucose powder to the weigh boat in weight scale. Weigh **0.4 g** of glucose powder and pour it in mixing bottle. Throw away the weigh boat and spoon straw and turn off weighting scale. Move the bottles to bench.

- **Set up bench.** Turn on flame, wipe the bench and pipette with 70% ethanol.

- **Add materials.** 
    - Use a 50 mL stripette to dispense **20 mL** of 10X M9 to mixing bottle. 
    - Use a 200 mL cylinder to dispense **180 mL** of ddH~2~O to mixing bottle. 
    - Use P1000 set at 400 uL to dispense **400 uL** of MgSO~4~ to mixing bottle.
    - Use P20 set at 20 uL to dispense **20 uL** of CaCl~2~ to mixing bottle. 
    - Shake the mixing bottle by hand, make sure every solid material is dissolved. If the material is not fully dissolved, use microwave to heat for 30 seconds. Loose the cap before place it in the microwave.

- **Filter media.** on the filtered bottles. 
    - Connect the stericup with vacuum pipe. Pour M9G from to mixing bottle into stericup. One hand holds the junction of pipe and stericup, another hand turn on the vacuum. Rotate the faucet until media go through the filter. 
    - After the medium has been filtered, disconnect the pipe from filtering machine. 
    - Be close to flame while removing the stericup from filtered bottle. Close the cap of filtered bottle.

- **Turn off flame**.

\newpage

## 0.2% glucose with M9 (M9G), any volume

```{r}
total_volume = 50 # unit in mL
tt <- tibble(
    Stock = c("glucose", "10X M9", "ddH~2~0", "1M MgSO~4~", "1M CaCl~2~"),
    AmountValue = c(total_volume*0.2/100, 
                    total_volume/10, 
                    total_volume/10*9, 
                    total_volume*10^-3 * 2*10^-3 * 10^6, 
                    total_volume*10^-3 * 0.1*10^-3 * 10^6),
    AmountUnit = c("g", "mL", "mL", "uL", "uL"),
    Amount = paste0(AmountValue, AmountUnit),
    Concentration = c("0.2%", "1X", "", "2mM", "0.1mM")
)
```


```{r}
cat("Total volume:", total_volume, "mL")
tt %>% 
    select(Stock, Amount, Concentration) %>%
    kable()
```


## 10X M9 salts, any volume


```{r}
total_volume = 1000 # unit in mL
tt <- tibble(
    Stock = c("Na~2~HPO~4~ 2H~2~O", "KH~2~PO~4~", "NaCl", "NH~4~Cl"),
    `Molar mass` = c(142, 136, 58, 54),
    Ratio = c(142/(142+2*18), 1,1,1) %>% round(3), 
    `Concentration (g/L)` = c(68, 30, 5, 10),
    AmountValue = total_volume/1000 * `Concentration (g/L)` / Ratio %>% round(1),
    AmountUnit = rep("g", 4),
    Amount = paste0(AmountValue, AmountUnit),
    `Concentration (mM)` = (`Concentration (g/L)` / `Molar mass` * 1000) %>% round (2)
)
```


```{r}
cat("Total volume:", total_volume, "mL")
tt %>%
    select(Stock, Amount, `Concentration (g/L)`, `Concentration (mM)`) %>%
    kable()
```


\newpage

## 10X 0-N Fertilizer 


















